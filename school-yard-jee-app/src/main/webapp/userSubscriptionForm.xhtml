<ui:composition template="/WEB-INF/templates/commonLayout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

	<ui:define name="cssFiles">
		<h:outputStylesheet name="common-style.css" library="css" />
		<h:outputStylesheet name="forms.css" library="css" />
		<h:outputStylesheet name="buttons.css" library="css" />
	</ui:define>

	<ui:define name="title">Formulaire d'inscription</ui:define>

	<ui:define name="header">
		<h:link outcome="schoolsList">Liste des écoles</h:link>
		<h:link outcome="userDashboard"
			rendered="#{welcomeBean.userConnected}">Tableau de bord</h:link>
		<h:link outcome="login" rendered="#{not welcomeBean.userConnected}">Se Connecter</h:link>
		<h:form class="inline">
			<h:commandLink action="#{loginBean.logout()}"
				rendered="#{welcomeBean.userConnected}">Se Déconnecter</h:commandLink>
		</h:form>
	</ui:define>

	<ui:define name="content">
		<h1>Formulaire d'inscription</h1>

		<div class="form-container">
			<h:form id="createUserForm">
				<div class="form-container">
					<div class="grid">
						<h:panelGrid columns="1" class="grid">

							<h:outputLabel value="Identifiant : " for="loginInput" />
							<h:inputText id="loginInput" value="#{createUserBean.user.login}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir un identifiant !"
								validatorMessage="L'identifiant doit contenir 5 à 15 caractères et aucun espace !">
								<f:validateRegex pattern="(^(\S){5,15})" for="loginInput" />
							</h:inputText>
							<h:message for="loginInput" styleClass="errorMessage" />

							<h:outputLabel value="Mot de passe : " for="passwordInput" />
							<h:inputSecret id="passwordInput"
								value="#{createUserBean.user.security.password}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir un mot de passe !"
								validatorMessage="Le mot de passe doit contenir 5 à 15 caractères avec 
								au moins une minuscule, une majuscule, un chiffre et un caractère spécial !">
								<f:validateRegex
									pattern="((?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*([^a-z][^A-Z]\D)){5,15})"
									for="passwordInput" />
							</h:inputSecret>
							<h:message styleclasse="errorMessage" for="passwordInput" />

							<h:outputLabel value="Nom : " for="lastNameInput" />
							<h:inputText id="lastNameInput"
								value="#{createUserBean.user.profil.lastName}" class="formInput"
								required="true" requiredMessage="Veuillez saisir un nom !"
								validatorMessage="Le nom doit contenir au moins 2 lettres, aucun chiffre ni symbole et moins de 25 caractères !">
								<f:validateRegex pattern="(([a-zA-Z '-]){2,25})"
									for="lastNameInput" />
							</h:inputText>
							<h:message styleclasse="errorMessage" for="lastNameInput" />

							<h:outputLabel value="Prénom : " for="firstNameInput" />
							<h:inputText id="firstNameInput"
								value="#{createUserBean.user.profil.firstName}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir un prénom !"
								validatorMessage="Le prénom doit contenir au moins 2 lettres, aucun chiffre ni symbole et moins de 25 caractères !">
								<f:validateRegex pattern="(([a-zA-Zéèêîàâôûù '-]){2,25})"
									for="firstNameInput" />
							</h:inputText>
							<h:message styleclasse="errorMessage" for="firstNameInput" />

							<h:outputLabel value="Email: " for="emailInput" />
							<h:inputText id="emailInput"
								value="#{createUserBean.user.profil.contact.email}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir un email !"
								validatorMessage="Veuillez entrer un email valide !">
								<f:validateRegex pattern="(^[\S]+@(?=.*[.])[a-zA-Z\d.-]+$)"
									for="emailInput" />
							</h:inputText>
							<h:message styleclasse="errorMessage" for="emailInput" />
						</h:panelGrid>
					</div>

					<div class="grid">
						<h:panelGrid columns="1" class="grid">
							<h3>Adresse</h3>

							<h:outputLabel value="Numéro : " for="numberInput" />
							<h:inputText id="numberInput"
								value="#{createUserBean.user.profil.contact.address.number}"
								class="formInput" />

							<h:outputLabel value="Voie ou Lieu-dit : " for="streetInput" />
							<h:inputText id="streetInput"
								value="#{createUserBean.user.profil.contact.address.street}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir une voie ou un lieu-dit !">
							</h:inputText>
							<h:message styleclasse="errorMessage" for="streetInput" />


							<h:outputLabel value="Code Postal : " for="zipcodeInput" />
							<h:inputText id="zipcodeInput"
								value="#{createUserBean.user.profil.contact.address.zipcode}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir un code postal !"
								validatorMessage="Le code postal doit contenir 5 chiffres et aucun espace !">
								<f:validateRegex pattern="(^(\d){5})" for="zipcodeInput" />
							</h:inputText>
							<h:message styleclasse="errorMessage" for="zipcodeInput" />

							<h:outputLabel value="Ville : " for="townInput" />
							<h:inputText id="townInput"
								value="#{createUserBean.user.profil.contact.address.town}"
								class="formInput" required="true"
								requiredMessage="Veuillez saisir une ville !"
								validatorMessage="La ville doit contenir au moins une lettre, aucun chiffre et moins de 45 caractères !">
								<f:validateRegex pattern="([a-zA-Z '-]{1,45})" />
							</h:inputText>
							<h:message styleclasse="errorMessage" for="townInput" />

						</h:panelGrid>
					</div>
				</div>
				<br />

				<h:commandButton action="#{createUserBean.create()}" value="Valider"
					class="custom-button" />

			</h:form>

		</div>
	</ui:define>

</ui:composition>






